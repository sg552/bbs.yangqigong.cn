<% if @monitored %>
  $('posts_list').update("<%= escape_javascript(render(:partial => 'posts_list', :object => @monitored_posts, :as => :posts))%>");
<% else %>
  $('posts_list').update("<%= escape_javascript(render(:partial => 'posts_list', :object => @posts, :as => :posts))%>");
<% end %>
<%= p = Hash.new
  p.update('page' => params[:page].to_i) if params[:page]
  p.update('monitored' => 'true') if @monitored
  p.update('utf8' => params[:utf8]) if params[:utf8]
  p.update('q' => @q) if @q
  p.update('user_id' => params[:user_id].to_i) if params[:user_id]
  p.update('topic_id' => params[:topic_id]) if params[:topic_id]
  modify_history('replaceState', 'Posts', posts_path, p) %>